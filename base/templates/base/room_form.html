{% extends "main.html" %}

{% block content %}

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-md-6">

      <div class="card shadow">
        <div class="card-body">

            <h4 class="text-center mb-4">
            {% if page == 'update' %}
                Update Post
            {% else %}
                Create Post
            {% endif %}
            </h4>



          <form method="POST">
            {% csrf_token %}

            <!-- <div class="form-group">
              <label>Topic</label>
              <select name="topic" class="form-control" required>
                {% for topic in topics %}
                    <option value="{{ topic.id }}"
                        {% if page == 'update' and topic.name == room.topic.name %}
                            selected
                        {% endif %}
                    >{{topic.name}}</option>
                {% endfor %}
              </select>
            </div> -->
            <div class="form-group">
              <label>Topic</label>
              <select name="topic" class="form-control" required>
                <option value="">Select a topic</option>
                {% for topic in topics %}
                  <option value="{{ topic.name }}"
                    {% if page == 'update' and topic.name == room.topic.name %}
                      selected
                    {% endif %}
                  >
                    {{ topic.name }}
                  </option>
                {% endfor %}
              </select>
            </div>

            <div class="form-group">
              <label for="name">Title</label>
              <input
                type="text"
                name="title"
                id="name"
                class="form-control"
                value="{% if page == 'update' %}{{room.name}}{% endif %}"
                required
              >
            </div>

            <div class="form-group">
              <label for="description">Description</label>
              <textarea
                name="description"
                id="description"
                class="form-control"
                rows="4"
              >{% if page == 'update' %}{{ room.description }}{% endif %}</textarea>
            </div>

            <div class="text-center mt-4">
              <button type="submit" class="btn btn-primary">
                {% if page == 'update' %}
                    Update
                {% else %}
                    Post
                {% endif %}
              </button>
            </div>

          </form>

        </div>
      </div>

    </div>
  </div>
</div>

{% endblock content %}